{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/source/canjrgultekin/profiqo/apps/admin/src/app/integrations/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ntype StatusItem = {\r\n  provider: string;\r\n  connectionId: string;\r\n  status: string;\r\n  displayName: string;\r\n  externalAccountId: string | null;\r\n  healthy: boolean;\r\n  cursors?: {\r\n    customersUpdatedAtMs?: string | null;\r\n    ordersUpdatedAtMs?: string | null;\r\n  };\r\n};\r\n\r\nexport default function IntegrationsHubPage() {\r\n  const router = useRouter();\r\n  const [items, setItems] = useState<StatusItem[]>([]);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    const load = async () => {\r\n      setErr(null);\r\n      const res = await fetch(\"/api/integrations/status\", { cache: \"no-store\" });\r\n      const payload = await res.json().catch(() => null);\r\n\r\n      if (cancelled) return;\r\n\r\n      if (!res.ok) {\r\n        setErr(payload?.message || \"Failed to load integrations status.\");\r\n        setItems([]);\r\n        return;\r\n      }\r\n\r\n      setItems(payload?.items || []);\r\n    };\r\n\r\n    load();\r\n\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, []);\r\n\r\n  const ikas = items.find((x) => x.provider === \"ikas\");\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6\">\r\n      <div className=\"mb-4\">\r\n        <h2 className=\"text-xl font-semibold text-dark dark:text-white\">Integrations</h2>\r\n        <p className=\"text-sm text-body-color dark:text-dark-6\">\r\n          Provider connectorlarını buradan yönet.\r\n        </p>\r\n      </div>\r\n\r\n      {err && (\r\n        <div className=\"mb-4 rounded-lg border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-600 dark:text-red-400\">\r\n          {err}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid gap-4 md:grid-cols-3\">\r\n        <button\r\n          onClick={() => router.push(\"/integrations/ikas\")}\r\n          className=\"rounded-[10px] border border-stroke bg-white p-4 text-left shadow-1 hover:border-primary dark:border-dark-3 dark:bg-gray-dark dark:shadow-card\"\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-lg font-semibold text-dark dark:text-white\">ikas</div>\r\n            <div className={`text-xs px-2 py-1 rounded ${ikas?.healthy ? \"bg-green-500/20 text-green-700\" : \"bg-gray-500/20 text-gray-700\"}`}>\r\n              {ikas?.healthy ? \"Connected\" : \"Not connected\"}\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-2 text-sm text-body-color dark:text-dark-6\">\r\n            Admin API connector\r\n          </div>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => alert(\"Trendyol connector coming soon.\")}\r\n          className=\"rounded-[10px] border border-stroke bg-white p-4 text-left shadow-1 hover:border-primary dark:border-dark-3 dark:bg-gray-dark dark:shadow-card\"\r\n        >\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-lg font-semibold text-dark dark:text-white\">Trendyol</div>\r\n            <div className=\"text-xs px-2 py-1 rounded bg-yellow-500/20 text-yellow-700\">\r\n              Coming soon\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-2 text-sm text-body-color dark:text-dark-6\">\r\n            Marketplace connector\r\n          </div>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"mt-6 rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n        <div className=\"mb-3 flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-semibold text-dark dark:text-white\">Connected Providers</h3>\r\n          <span className=\"text-sm text-body-color dark:text-dark-6\">{items.length} item</span>\r\n        </div>\r\n\r\n        {items.length === 0 ? (\r\n          <div className=\"text-sm text-body-color dark:text-dark-6\">No active integrations.</div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full table-auto\">\r\n              <thead>\r\n                <tr className=\"text-left text-xs text-body-color dark:text-dark-6\">\r\n                  <th className=\"px-2 py-2\">Provider</th>\r\n                  <th className=\"px-2 py-2\">Status</th>\r\n                  <th className=\"px-2 py-2\">Store</th>\r\n                  <th className=\"px-2 py-2\">Last cursor</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.map((x) => (\r\n                  <tr key={x.connectionId} className=\"border-t border-stroke dark:border-dark-3 text-sm\">\r\n                    <td className=\"px-2 py-2\">{x.provider}</td>\r\n                    <td className=\"px-2 py-2\">\r\n                      <span className={`text-xs px-2 py-1 rounded ${x.healthy ? \"bg-green-500/20 text-green-700\" : \"bg-gray-500/20 text-gray-700\"}`}>\r\n                        {x.healthy ? \"Healthy\" : x.status}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-2 py-2\">{x.displayName || \"-\"}</td>\r\n                    <td className=\"px-2 py-2 text-xs text-body-color dark:text-dark-6\">\r\n                      cust:{x.cursors?.customersUpdatedAtMs || \"-\"} ord:{x.cursors?.ordersUpdatedAtMs || \"-\"}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}