{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/source/canjrgultekin/profiqo/apps/admin/src/app/integrations/ikas/page.tsx"],"sourcesContent":["// Path: apps/admin/src/app/integrations/ikas/page.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\ntype SyncScope = \"customers\" | \"orders\" | \"abandoned\" | \"both\";\r\n\r\ntype StartSyncResponse = {\r\n  batchId: string;\r\n  jobs: { jobId: string; kind: string }[];\r\n};\r\n\r\ntype JobStatus = \"Queued\" | \"Running\" | \"Succeeded\" | \"Failed\" | \"Cancelled\" | string;\r\n\r\ntype IntegrationJobDto = {\r\n  jobId: string;\r\n  batchId: string;\r\n  tenantId: string;\r\n  connectionId: string;\r\n  kind: string;\r\n  status: JobStatus;\r\n  pageSize: number;\r\n  maxPages: number;\r\n  processedItems: number;\r\n  createdAtUtc: string;\r\n  startedAtUtc?: string | null;\r\n  finishedAtUtc?: string | null;\r\n  lastError?: string | null;\r\n};\r\n\r\ntype BatchResponse = {\r\n  batchId: string;\r\n  jobs: IntegrationJobDto[];\r\n};\r\n\r\nfunction normalizeStartSync(payload: any): StartSyncResponse {\r\n  const batchId = payload?.batchId ?? payload?.BatchId ?? \"\";\r\n  const jobsRaw = payload?.jobs ?? payload?.Jobs ?? [];\r\n  const jobs = Array.isArray(jobsRaw)\r\n    ? jobsRaw.map((x: any) => ({\r\n        jobId: x?.jobId ?? x?.JobId ?? \"\",\r\n        kind: x?.kind ?? x?.Kind ?? \"\",\r\n      }))\r\n    : [];\r\n  return { batchId, jobs };\r\n}\r\n\r\nfunction normalizeBatch(payload: any): BatchResponse {\r\n  const batchId = payload?.batchId ?? payload?.BatchId ?? \"\";\r\n  const jobsRaw = payload?.jobs ?? payload?.Jobs ?? [];\r\n  const jobs: IntegrationJobDto[] = Array.isArray(jobsRaw)\r\n    ? jobsRaw.map((j: any) => ({\r\n        jobId: j?.jobId ?? j?.JobId ?? \"\",\r\n        batchId: j?.batchId ?? j?.BatchId ?? batchId,\r\n        tenantId: j?.tenantId ?? j?.TenantId ?? \"\",\r\n        connectionId: j?.connectionId ?? j?.ConnectionId ?? \"\",\r\n        kind: String(j?.kind ?? j?.Kind ?? \"\"),\r\n        status: String(j?.status ?? j?.Status ?? \"\"),\r\n        pageSize: Number(j?.pageSize ?? j?.PageSize ?? 0),\r\n        maxPages: Number(j?.maxPages ?? j?.MaxPages ?? 0),\r\n        processedItems: Number(j?.processedItems ?? j?.ProcessedItems ?? 0),\r\n        createdAtUtc: String(j?.createdAtUtc ?? j?.CreatedAtUtc ?? \"\"),\r\n        startedAtUtc: j?.startedAtUtc ?? j?.StartedAtUtc ?? null,\r\n        finishedAtUtc: j?.finishedAtUtc ?? j?.FinishedAtUtc ?? null,\r\n        lastError: j?.lastError ?? j?.LastError ?? null,\r\n      }))\r\n    : [];\r\n  return { batchId, jobs };\r\n}\r\n\r\nexport default function IkasIntegrationPage() {\r\n  const [storeLabel, setStoreLabel] = useState(\"\");\r\n  const [storeDomain, setStoreDomain] = useState(\"\");\r\n  const [accessToken, setAccessToken] = useState(\"\");\r\n\r\n  const [hasExisting, setHasExisting] = useState(false);\r\n  const [connectionId, setConnectionId] = useState<string | null>(null);\r\n\r\n  const [log, setLog] = useState<string>(\"\");\r\n  const append = (s: string) => setLog((x) => (x ? x + \"\\n\" + s : s));\r\n\r\n  const [batchId, setBatchId] = useState<string | null>(null);\r\n  const [batch, setBatch] = useState<BatchResponse | null>(null);\r\n  const [polling, setPolling] = useState(false);\r\n  const pollTimer = useRef<number | null>(null);\r\n\r\n  const [pageSize, setPageSize] = useState(50);\r\n  const [maxPages, setMaxPages] = useState(20);\r\n\r\n  // Default \"both\" now means: Customers + Orders + Abandoned\r\n  const [scope, setScope] = useState<SyncScope>(\"both\");\r\n\r\n  const anyRunning = useMemo(() => {\r\n    const jobs = batch?.jobs || [];\r\n    return jobs.some((j) => j.status === \"Queued\" || j.status === \"Running\");\r\n  }, [batch]);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    const load = async () => {\r\n      const res = await fetch(\"/api/integrations/ikas/connection\", { method: \"GET\", cache: \"no-store\" });\r\n      const payload = await res.json().catch(() => null);\r\n\r\n      if (cancelled) return;\r\n\r\n      if (!res.ok) {\r\n        append(`LOAD CONNECTION ERROR: ${payload?.message || JSON.stringify(payload)}`);\r\n        return;\r\n      }\r\n\r\n      const hasConnection = Boolean(payload?.hasConnection ?? payload?.HasConnection);\r\n      if (!hasConnection) {\r\n        setHasExisting(false);\r\n        setConnectionId(null);\r\n        return;\r\n      }\r\n\r\n      setHasExisting(true);\r\n\r\n      const cid = payload?.connectionId ?? payload?.ConnectionId;\r\n      setConnectionId(cid);\r\n\r\n      setStoreLabel(payload?.displayName ?? payload?.DisplayName ?? \"\");\r\n      setStoreDomain(payload?.externalAccountId ?? payload?.ExternalAccountId ?? \"\");\r\n\r\n      setAccessToken(\"\");\r\n\r\n      append(`Existing Ikas connection loaded. connectionId=${cid}`);\r\n    };\r\n\r\n    load();\r\n\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const connectOrUpdate = async () => {\r\n    setBatchId(null);\r\n    setBatch(null);\r\n\r\n    if (hasExisting && !accessToken.trim()) {\r\n      append(\"UPDATE TOKEN ERROR: Mevcut connection var. Token güncellemek için Access Token girmen lazım.\");\r\n      return;\r\n    }\r\n\r\n    const res = await fetch(\"/api/integrations/ikas/connect\", {\r\n      method: \"POST\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      body: JSON.stringify({ storeLabel, storeDomain, accessToken }),\r\n    });\r\n\r\n    const payload = await res.json().catch(() => null);\r\n\r\n    if (!res.ok) {\r\n      append(`CONNECT/UPDATE ERROR: ${payload?.message || JSON.stringify(payload)}`);\r\n      return;\r\n    }\r\n\r\n    const cid = payload?.connectionId ?? payload?.ConnectionId;\r\n    setConnectionId(cid);\r\n    setHasExisting(true);\r\n    setAccessToken(\"\");\r\n\r\n    append(`${hasExisting ? \"Updated\" : \"Connected\"}. connectionId=${cid}`);\r\n  };\r\n\r\n  const test = async () => {\r\n    if (!connectionId) return;\r\n\r\n    const res = await fetch(\"/api/integrations/ikas/test\", {\r\n      method: \"POST\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      body: JSON.stringify({ connectionId }),\r\n    });\r\n\r\n    const payload = await res.json().catch(() => null);\r\n\r\n    if (!res.ok) {\r\n      append(`TEST ERROR: ${payload?.message || JSON.stringify(payload)}`);\r\n      return;\r\n    }\r\n\r\n    append(`Test OK. meId=${payload?.meId ?? payload?.MeId}`);\r\n  };\r\n\r\n  const startSync = async () => {\r\n    if (!connectionId) return;\r\n\r\n    setBatchId(null);\r\n    setBatch(null);\r\n\r\n    const res = await fetch(\"/api/integrations/ikas/sync/start\", {\r\n      method: \"POST\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      body: JSON.stringify({ connectionId, scope, pageSize, maxPages }),\r\n    });\r\n\r\n    const payload = await res.json().catch(() => null);\r\n\r\n    if (!res.ok) {\r\n      append(`START SYNC ERROR: ${payload?.message || JSON.stringify(payload)}`);\r\n      return;\r\n    }\r\n\r\n    const r = normalizeStartSync(payload);\r\n\r\n    if (!r.batchId) {\r\n      append(`START SYNC ERROR: batchId missing. payload=${JSON.stringify(payload)}`);\r\n      return;\r\n    }\r\n\r\n    setBatchId(r.batchId);\r\n    append(`Sync started. batchId=${r.batchId}`);\r\n\r\n    if (r.jobs?.length) {\r\n      append(`Jobs: ${r.jobs.map((j) => `${j.kind}:${j.jobId}`).join(\", \")}`);\r\n    } else {\r\n      append(\"Jobs: (empty)\");\r\n    }\r\n\r\n    setPolling(true);\r\n  };\r\n\r\n  const fetchBatch = async (id: string) => {\r\n    const res = await fetch(`/api/integrations/ikas/jobs/batch/${id}`, { method: \"GET\", cache: \"no-store\" });\r\n    const payload = await res.json().catch(() => null);\r\n\r\n    if (!res.ok) {\r\n      append(`POLL ERROR: ${payload?.message || JSON.stringify(payload)}`);\r\n      return null;\r\n    }\r\n\r\n    return normalizeBatch(payload);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!polling || !batchId) return;\r\n\r\n    let cancelled = false;\r\n\r\n    const tick = async () => {\r\n      if (cancelled) return;\r\n\r\n      const b = await fetchBatch(batchId);\r\n      if (b) {\r\n        setBatch(b);\r\n\r\n        const running = (b.jobs || []).some((j) => j.status === \"Queued\" || j.status === \"Running\");\r\n        if (!running) {\r\n          setPolling(false);\r\n          append(`Batch finished. batchId=${batchId}`);\r\n        }\r\n      }\r\n    };\r\n\r\n    tick();\r\n\r\n    pollTimer.current = window.setInterval(() => tick(), 2000);\r\n\r\n    return () => {\r\n      cancelled = true;\r\n      if (pollTimer.current) {\r\n        window.clearInterval(pollTimer.current);\r\n        pollTimer.current = null;\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [polling, batchId]);\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6\">\r\n      <div className=\"rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n        <h2 className=\"mb-4 text-lg font-semibold text-dark dark:text-white\">Ikas Integration</h2>\r\n\r\n        <div className=\"grid gap-3 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"text-sm text-body-color dark:text-dark-6\">Store Label</label>\r\n            <input\r\n              className=\"w-full rounded-lg border border-stroke bg-transparent px-4 py-2 text-dark outline-none focus:border-primary dark:border-dark-3 dark:text-white\"\r\n              value={storeLabel}\r\n              onChange={(e) => setStoreLabel(e.target.value)}\r\n              placeholder=\"Örn: profiqo\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm text-body-color dark:text-dark-6\">Store Domain (opsiyonel)</label>\r\n            <input\r\n              className=\"w-full rounded-lg border border-stroke bg-transparent px-4 py-2 text-dark outline-none focus:border-primary dark:border-dark-3 dark:text-white\"\r\n              value={storeDomain}\r\n              onChange={(e) => setStoreDomain(e.target.value)}\r\n              placeholder=\"Örn: https://www.example.com\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"text-sm text-body-color dark:text-dark-6\">\r\n              Access Token {hasExisting ? \"(stored, paste here to rotate/update)\" : \"\"}\r\n            </label>\r\n            <textarea\r\n              className=\"min-h-[120px] w-full rounded-lg border border-stroke bg-transparent px-4 py-2 text-dark outline-none focus:border-primary dark:border-dark-3 dark:text-white\"\r\n              value={accessToken}\r\n              onChange={(e) => setAccessToken(e.target.value)}\r\n              placeholder={hasExisting ? \"Token DB'de var. Güncellemek istersen buraya yeni token yapıştır.\" : \"Bearer token\"}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-4 flex flex-wrap gap-2\">\r\n          <button className=\"rounded-lg bg-primary px-4 py-2 font-medium text-white hover:bg-opacity-90\" onClick={connectOrUpdate}>\r\n            {hasExisting ? \"Update Token\" : \"Connect\"}\r\n          </button>\r\n\r\n          <button className=\"rounded-lg border border-stroke px-4 py-2 text-dark dark:border-dark-3 dark:text-white\" onClick={test} disabled={!connectionId}>\r\n            Test Connection\r\n          </button>\r\n\r\n          <div className=\"ml-auto flex items-center gap-2\">\r\n            <label className=\"text-sm text-body-color dark:text-dark-6\">Scope</label>\r\n            <select\r\n              value={scope}\r\n              onChange={(e) => setScope(e.target.value as SyncScope)}\r\n              className=\"rounded-lg border border-stroke bg-transparent px-3 py-2 text-sm text-dark outline-none dark:border-dark-3 dark:text-white\"\r\n            >\r\n              <option value=\"both\">All (Customers + Orders + Abandoned)</option>\r\n              <option value=\"customers\">Customers</option>\r\n              <option value=\"orders\">Orders</option>\r\n              <option value=\"abandoned\">Abandoned Carts</option>\r\n            </select>\r\n\r\n            <label className=\"text-sm text-body-color dark:text-dark-6\">PageSize</label>\r\n            <input\r\n              type=\"number\"\r\n              value={pageSize}\r\n              onChange={(e) => setPageSize(Number(e.target.value || 50))}\r\n              className=\"w-[90px] rounded-lg border border-stroke bg-transparent px-3 py-2 text-sm text-dark outline-none dark:border-dark-3 dark:text-white\"\r\n            />\r\n\r\n            <label className=\"text-sm text-body-color dark:text-dark-6\">MaxPages</label>\r\n            <input\r\n              type=\"number\"\r\n              value={maxPages}\r\n              onChange={(e) => setMaxPages(Number(e.target.value || 20))}\r\n              className=\"w-[90px] rounded-lg border border-stroke bg-transparent px-3 py-2 text-sm text-dark outline-none dark:border-dark-3 dark:text-white\"\r\n            />\r\n\r\n            <button\r\n              className=\"rounded-lg border border-stroke px-4 py-2 text-dark dark:border-dark-3 dark:text-white\"\r\n              onClick={startSync}\r\n              disabled={!connectionId || polling || anyRunning}\r\n            >\r\n              {polling || anyRunning ? \"Sync Running...\" : \"Start Sync\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {batchId && (\r\n          <div className=\"mt-4 rounded-lg border border-stroke p-3 dark:border-dark-3\">\r\n            <div className=\"mb-2 flex items-center justify-between\">\r\n              <div className=\"text-sm text-dark dark:text-white\">\r\n                Batch: <span className=\"font-mono text-xs\">{batchId}</span>\r\n              </div>\r\n              <div className=\"text-sm text-body-color dark:text-dark-6\">{polling ? \"Polling...\" : \"Idle\"}</div>\r\n            </div>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full table-auto\">\r\n                <thead>\r\n                  <tr className=\"text-left text-xs text-body-color dark:text-dark-6\">\r\n                    <th className=\"px-2 py-2\">Kind</th>\r\n                    <th className=\"px-2 py-2\">Status</th>\r\n                    <th className=\"px-2 py-2\">Processed</th>\r\n                    <th className=\"px-2 py-2\">Started</th>\r\n                    <th className=\"px-2 py-2\">Finished</th>\r\n                    <th className=\"px-2 py-2\">Error</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {(batch?.jobs || []).map((j) => (\r\n                    <tr key={j.jobId} className=\"border-t border-stroke dark:border-dark-3 text-xs\">\r\n                      <td className=\"px-2 py-2\">{j.kind}</td>\r\n                      <td className=\"px-2 py-2\">{j.status}</td>\r\n                      <td className=\"px-2 py-2\">{j.processedItems}</td>\r\n                      <td className=\"px-2 py-2\">{j.startedAtUtc ? new Date(j.startedAtUtc).toLocaleString() : \"-\"}</td>\r\n                      <td className=\"px-2 py-2\">{j.finishedAtUtc ? new Date(j.finishedAtUtc).toLocaleString() : \"-\"}</td>\r\n                      <td className=\"px-2 py-2\">{j.lastError || \"-\"}</td>\r\n                    </tr>\r\n                  ))}\r\n                  {!batch?.jobs?.length && (\r\n                    <tr className=\"border-t border-stroke dark:border-dark-3 text-xs\">\r\n                      <td className=\"px-2 py-2\" colSpan={6}>Jobs not loaded yet...</td>\r\n                    </tr>\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <pre className=\"mt-4 whitespace-pre-wrap rounded-lg border border-stroke bg-transparent p-3 text-xs text-dark dark:border-dark-3 dark:text-white\">\r\n          {log || \"Logs...\"}\r\n        </pre>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}