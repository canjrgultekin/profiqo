{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/source/canjrgultekin/profiqo/apps/admin/src/app/orders/%5BorderId%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\n\r\ntype OrderLineDto = {\r\n  sku: string;\r\n  productName: string;\r\n  quantity: number;\r\n  unitPrice: number;\r\n  unitCurrency: string;\r\n  lineTotal: number;\r\n  lineTotalCurrency: string;\r\n};\r\n\r\ntype OrderDto = {\r\n  orderId: string;\r\n  customerId: string;\r\n  providerOrderId: string | null;\r\n  channel: string;\r\n  status: string;\r\n  placedAtUtc: string;\r\n  completedAtUtc: string | null;\r\n  totalAmount: number;\r\n  totalCurrency: string;\r\n  netProfit: number;\r\n  netProfitCurrency: string;\r\n  costBreakdownJson: string;\r\n  lines: OrderLineDto[];\r\n};\r\n\r\nexport default function OrderDetailPage() {\r\n  const params = useParams<{ orderId: string }>();\r\n  const orderId = params?.orderId;\r\n\r\n  const [order, setOrder] = useState<OrderDto | null>(null);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  const load = async (id: string) => {\r\n    setErr(null);\r\n\r\n    const res = await fetch(`/api/orders/${id}`, { cache: \"no-store\" });\r\n    const payload = await res.json().catch(() => null);\r\n\r\n    if (!res.ok) {\r\n      setErr(payload?.message || \"Failed to load order.\");\r\n      return;\r\n    }\r\n\r\n    setOrder(payload);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!orderId) return;\r\n    load(orderId);\r\n  }, [orderId]);\r\n\r\n  if (!orderId) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n          Loading...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (err) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card text-red-600\">\r\n          {err}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!order) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n          Loading...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6\">\r\n      <div className=\"mb-4 rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n        <h2 className=\"text-lg font-semibold text-dark dark:text-white\">Order Detail</h2>\r\n        <div className=\"mt-2 text-sm text-body-color dark:text-dark-6\">\r\n          <div><b>Order:</b> {order.providerOrderId || order.orderId}</div>\r\n          <div><b>Channel:</b> {order.channel}</div>\r\n          <div><b>Status:</b> {order.status}</div>\r\n          <div><b>Placed:</b> {new Date(order.placedAtUtc).toLocaleString()}</div>\r\n          <div><b>Total:</b> {order.totalAmount} {order.totalCurrency}</div>\r\n          <div><b>Customer:</b> <a className=\"underline\" href={`/customers/${order.customerId}`}>{order.customerId}</a></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n        <h3 className=\"text-md font-semibold text-dark dark:text-white\">Order Lines</h3>\r\n        <div className=\"mt-3 overflow-x-auto\">\r\n          <table className=\"w-full table-auto\">\r\n            <thead>\r\n              <tr className=\"text-left text-xs text-body-color dark:text-dark-6\">\r\n                <th className=\"px-2 py-2\">SKU</th>\r\n                <th className=\"px-2 py-2\">Product</th>\r\n                <th className=\"px-2 py-2\">Qty</th>\r\n                <th className=\"px-2 py-2\">Unit</th>\r\n                <th className=\"px-2 py-2\">Line Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {order.lines.map((l, idx) => (\r\n                <tr key={idx} className=\"border-t border-stroke dark:border-dark-3 text-xs\">\r\n                  <td className=\"px-2 py-2\">{l.sku}</td>\r\n                  <td className=\"px-2 py-2\">{l.productName}</td>\r\n                  <td className=\"px-2 py-2\">{l.quantity}</td>\r\n                  <td className=\"px-2 py-2\">{l.unitPrice} {l.unitCurrency}</td>\r\n                  <td className=\"px-2 py-2\">{l.lineTotal} {l.lineTotalCurrency}</td>\r\n                </tr>\r\n              ))}\r\n              {!order.lines.length && (\r\n                <tr className=\"border-t border-stroke dark:border-dark-3 text-xs\">\r\n                  <td className=\"px-2 py-2\" colSpan={5}>No lines</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}