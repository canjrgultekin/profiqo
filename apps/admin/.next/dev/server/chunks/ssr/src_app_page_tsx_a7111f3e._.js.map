{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/source/canjrgultekin/profiqo/apps/admin/src/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\ntype Overview = {\r\n  windowDays: number;\r\n  totalCustomers: number;\r\n  activeCustomers30: number;\r\n  totalOrders30: number;\r\n  grossRevenue30: number;\r\n  netProfit30: number;\r\n  currency: string;\r\n};\r\n\r\ntype ChannelRow = { channel: string; orders: number; gross: number; profit: number; };\r\ntype ChannelBreakdown = { windowDays: number; currency: string; items: ChannelRow[]; };\r\n\r\nexport default function DashboardPage() {\r\n  const [overview, setOverview] = useState<Overview | null>(null);\r\n  const [channels, setChannels] = useState<ChannelBreakdown | null>(null);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  const load = async () => {\r\n    setErr(null);\r\n\r\n    const oRes = await fetch(\"/api/reports/overview\", { cache: \"no-store\" });\r\n    const oPayload = await oRes.json().catch(() => null);\r\n    if (!oRes.ok) { setErr(oPayload?.message || \"Overview failed.\"); return; }\r\n    setOverview(oPayload);\r\n\r\n    const cRes = await fetch(\"/api/reports/channel-breakdown\", { cache: \"no-store\" });\r\n    const cPayload = await cRes.json().catch(() => null);\r\n    if (!cRes.ok) { setErr(cPayload?.message || \"Channel breakdown failed.\"); return; }\r\n    setChannels(cPayload);\r\n  };\r\n\r\n  useEffect(() => { load(); }, []);\r\n\r\n  if (err) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card text-red-600\">\r\n          {err}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!overview || !channels) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n          Loading dashboard...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6\">\r\n      <h1 className=\"mb-4 text-xl font-semibold text-dark dark:text-white\">Dashboard</h1>\r\n\r\n      <div className=\"grid gap-4 md:grid-cols-4\">\r\n        <Card title=\"Total Customers\" value={overview.totalCustomers} />\r\n        <Card title={`Active Customers (${overview.windowDays}d)`} value={overview.activeCustomers30} />\r\n        <Card title={`Orders (${overview.windowDays}d)`} value={overview.totalOrders30} />\r\n        <Card title={`Net Profit (${overview.windowDays}d)`} value={`${overview.netProfit30} ${overview.currency}`} />\r\n      </div>\r\n\r\n      <div className=\"mt-6 rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n        <h2 className=\"text-lg font-semibold text-dark dark:text-white\">Channel Breakdown (30d)</h2>\r\n\r\n        <div className=\"mt-3 overflow-x-auto\">\r\n          <table className=\"w-full table-auto\">\r\n            <thead>\r\n              <tr className=\"text-left text-xs text-body-color dark:text-dark-6\">\r\n                <th className=\"px-2 py-2\">Channel</th>\r\n                <th className=\"px-2 py-2\">Orders</th>\r\n                <th className=\"px-2 py-2\">Gross</th>\r\n                <th className=\"px-2 py-2\">Profit</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {channels.items.map((r) => (\r\n                <tr key={r.channel} className=\"border-t border-stroke dark:border-dark-3 text-sm\">\r\n                  <td className=\"px-2 py-2\">{r.channel}</td>\r\n                  <td className=\"px-2 py-2\">{r.orders}</td>\r\n                  <td className=\"px-2 py-2\">{r.gross} {channels.currency}</td>\r\n                  <td className=\"px-2 py-2\">{r.profit} {channels.currency}</td>\r\n                </tr>\r\n              ))}\r\n              {!channels.items.length && (\r\n                <tr className=\"border-t border-stroke dark:border-dark-3 text-sm\">\r\n                  <td className=\"px-2 py-3\" colSpan={4}>No data</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-4 rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n        <h2 className=\"text-lg font-semibold text-dark dark:text-white\">Revenue vs Profit (30d)</h2>\r\n        <div className=\"mt-2 text-sm text-body-color dark:text-dark-6\">\r\n          Gross: {overview.grossRevenue30} {overview.currency}, Net Profit: {overview.netProfit30} {overview.currency}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Card({ title, value }: { title: string; value: any }) {\r\n  return (\r\n    <div className=\"rounded-[10px] bg-white p-4 shadow-1 dark:bg-gray-dark dark:shadow-card\">\r\n      <div className=\"text-xs text-body-color dark:text-dark-6\">{title}</div>\r\n      <div className=\"mt-1 text-lg font-semibold text-dark dark:text-white\">{value}</div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAiBe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAkB;IAC1D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAA0B;IAClE,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAE9C,MAAM,OAAO;QACX,OAAO;QAEP,MAAM,OAAO,MAAM,MAAM,yBAAyB;YAAE,OAAO;QAAW;QACtE,MAAM,WAAW,MAAM,KAAK,IAAI,GAAG,KAAK,CAAC,IAAM;QAC/C,IAAI,CAAC,KAAK,EAAE,EAAE;YAAE,OAAO,UAAU,WAAW;YAAqB;QAAQ;QACzE,YAAY;QAEZ,MAAM,OAAO,MAAM,MAAM,kCAAkC;YAAE,OAAO;QAAW;QAC/E,MAAM,WAAW,MAAM,KAAK,IAAI,GAAG,KAAK,CAAC,IAAM;QAC/C,IAAI,CAAC,KAAK,EAAE,EAAE;YAAE,OAAO,UAAU,WAAW;YAA8B;QAAQ;QAClF,YAAY;IACd;IAEA,IAAA,kNAAS,EAAC;QAAQ;IAAQ,GAAG,EAAE;IAE/B,IAAI,KAAK;QACP,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;IAIT;IAEA,IAAI,CAAC,YAAY,CAAC,UAAU;QAC1B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAA0E;;;;;;;;;;;IAK/F;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAuD;;;;;;0BAErE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,OAAM;wBAAkB,OAAO,SAAS,cAAc;;;;;;kCAC5D,8OAAC;wBAAK,OAAO,CAAC,kBAAkB,EAAE,SAAS,UAAU,CAAC,EAAE,CAAC;wBAAE,OAAO,SAAS,iBAAiB;;;;;;kCAC5F,8OAAC;wBAAK,OAAO,CAAC,QAAQ,EAAE,SAAS,UAAU,CAAC,EAAE,CAAC;wBAAE,OAAO,SAAS,aAAa;;;;;;kCAC9E,8OAAC;wBAAK,OAAO,CAAC,YAAY,EAAE,SAAS,UAAU,CAAC,EAAE,CAAC;wBAAE,OAAO,GAAG,SAAS,WAAW,CAAC,CAAC,EAAE,SAAS,QAAQ,EAAE;;;;;;;;;;;;0BAG5G,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAkD;;;;;;kCAEhE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAM,WAAU;;8CACf,8OAAC;8CACC,cAAA,8OAAC;wCAAG,WAAU;;0DACZ,8OAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,8OAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,8OAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,8OAAC;gDAAG,WAAU;0DAAY;;;;;;;;;;;;;;;;;8CAG9B,8OAAC;;wCACE,SAAS,KAAK,CAAC,GAAG,CAAC,CAAC,kBACnB,8OAAC;gDAAmB,WAAU;;kEAC5B,8OAAC;wDAAG,WAAU;kEAAa,EAAE,OAAO;;;;;;kEACpC,8OAAC;wDAAG,WAAU;kEAAa,EAAE,MAAM;;;;;;kEACnC,8OAAC;wDAAG,WAAU;;4DAAa,EAAE,KAAK;4DAAC;4DAAE,SAAS,QAAQ;;;;;;;kEACtD,8OAAC;wDAAG,WAAU;;4DAAa,EAAE,MAAM;4DAAC;4DAAE,SAAS,QAAQ;;;;;;;;+CAJhD,EAAE,OAAO;;;;;wCAOnB,CAAC,SAAS,KAAK,CAAC,MAAM,kBACrB,8OAAC;4CAAG,WAAU;sDACZ,cAAA,8OAAC;gDAAG,WAAU;gDAAY,SAAS;0DAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQlD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAkD;;;;;;kCAChE,8OAAC;wBAAI,WAAU;;4BAAgD;4BACrD,SAAS,cAAc;4BAAC;4BAAE,SAAS,QAAQ;4BAAC;4BAAe,SAAS,WAAW;4BAAC;4BAAE,SAAS,QAAQ;;;;;;;;;;;;;;;;;;;AAKrH;AAEA,SAAS,KAAK,EAAE,KAAK,EAAE,KAAK,EAAiC;IAC3D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BAA4C;;;;;;0BAC3D,8OAAC;gBAAI,WAAU;0BAAwD;;;;;;;;;;;;AAG7E"}}]
}